<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/forget.css">
    <script src=""></script>
</head>

<body>

    <header>
        <div class="header-box">
            <div class="header-box-left">
                <a href="#">
                    <img src="./img/shouye/logo.jpg" alt="">
                </a>
            </div>
            <div class="header-box-right">
                <div class="my">
                    <a href="#">
                        <img src="./img/shouye/my.jpg" alt="">
                    </a>
                </div>
                <div class="down">
                    <a href="#">
                        <img src="./img/shouye/xiazai.jpg" alt="">
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="mulu">
        <div class="banxin">
            <p>
                <a class="shouye" href="index.html">首页</a> > <a href="forget.html">找回密码</a>
            </p>
        </div>
    </div>

    <form action="login.html" onsubmit="return check()">
        <ul class="yanzheng">
            <li>
                <input type="text" name="" id="phone" pattern="^1[34578][0-9]{9}$" required placeholder="请输入手机号">
                <span id="ma">发送验证码</span>
            </li>
            <li>
                <input type="text" pattern="^\d{4}$" id="yzm" required placeholder="请输入短信中的验证码">
            </li>
            <li>
                <input id="pwd1" type="password" placeholder="请输入新密码">
            </li>
            <li>
                <input id="pwd2" type="password" placeholder="请输入确认新密码">
            </li>
        </ul>
        <button type="submit">提交</button>
    </form>


</body>

</html>


<script>
    var ma = document.getElementById('ma');
    var time = 60;
    var shijian=3;
    var timer;
    var str;
    var time1;
    const sj1 = Math.floor(Math.random() * 10)
    const sj2 = Math.floor(Math.random() * 10)
    const sj3 = Math.floor(Math.random() * 10)
    const sj4 = Math.floor(Math.random() * 10)
    str = sj1 + '' + sj2 + '' + sj3 + '' + sj4;
    ma.onclick = function () {
        clearInterval(timer);
        clearInterval(time1)
        time1 = setInterval(function(){
            if(shijian==0){
                alert(str);
                clearInterval(time1)
                shijian = 3;
            }else{
                shijian--;
            }
        },1000)
        timer = setInterval(function () {
            if (time == 0) {
                ma.innerHTML = '获取验证码';
                time = 60;
            } else {
                time--;
                ma.innerHTML = time + '秒后重新发送'
            }
        }, 1000)
    }



    function check() {
        var p1 = document.getElementById('pwd1').value;
        var p2 = document.getElementById('pwd2').value;

        if (yzm.value != str) {
            alert('验证码有误')
            return false;
        } else if (p1 != p2) {
            alert('请输入相同密码')
            return false;
        }else{
            return true
        }
    }

</script>