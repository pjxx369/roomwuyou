<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reg.css">
    <link rel="stylesheet" href="./css/header.css">
    <script src=""></script>
</head>

<body>
    <header>
        <div class="header-box">
            <div class="header-box-left">
                <a href="#">
                    <img src="./img/shouye/logo.jpg" alt="">
                </a>
            </div>
            <div class="header-box-right">
                <div class="my">
                    <a href="#">
                        <img src="./img/shouye/my.jpg" alt="">
                    </a>
                </div>
                <div class="down">
                    <a href="#">
                        <img src="./img/shouye/xiazai.jpg" alt="">
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="mulu">
        <div class="banxin">
            <p>
                <a class="shouye" href="index.html">首页</a> > <a href="my.html">我的</a> > <a href="reg.html">注册</a>
            </p>
        </div>
    </div>

    <form action="login.html" onsubmit="return fn()">
            <ul class="yanzheng">
                <li>
                    <input type="text" name="" id="phone" pattern="^1[34578][0-9]{9}$" required placeholder="请输入手机号">
                    <span id="ma">发送验证码</span>
                </li>
                <li>
                    <input type="text"  id="yanzheng" required placeholder="请输入短信中的验证码">
                </li>
                <li>
                    <input type="password" pattern="^\w{6}+$" required placeholder="请输入新密码">
                </li>
            </ul>
        <button type="submit">立即注册</button>
    </form>

</body>

</html>

<script>
    var ma=document.getElementById('ma');
    var time = 60;
    var timer;
    var yanzheng=document.getElementById('yanzheng');
    var str;
    var time1;
    const sj1 = Math.floor(Math.random() * 10)
    const sj2 = Math.floor(Math.random() * 10)
    const sj3 = Math.floor(Math.random() * 10)
    const sj4 = Math.floor(Math.random() * 10)
    str = sj1 + '' + sj2 + '' + sj3 + '' + sj4;
    var shijian=3;
    ma.onclick = function(){
        clearInterval(timer);
        clearInterval(time1)
        time1 = setInterval(function(){
            if(shijian==0){
                alert(str);
                console.log(str);
                clearInterval(time1)
                shijian = 3;
            }else{
                shijian--;
            }
        },1000)
        timer = setInterval(function(){

            if(time==0){
                ma.innerHTML='获取验证码';
                time=60;
            }else{
                time--;
                ma.innerHTML=time+'秒后重新发送'
            }
        },1000)

    }
    function fn(){
        if(yanzheng.value!=str){
            alert('验证码输入有误')
            return false
        }else{
            return true
        }
    }


</script>